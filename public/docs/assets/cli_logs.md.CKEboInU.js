import{_ as a,o as i,c as t,ag as e}from"./chunks/framework.wGDfT7ie.js";const c=JSON.parse('{"title":"cloudpipe logs","description":"","frontmatter":{},"headers":[],"relativePath":"cli/logs.md","filePath":"cli/logs.md"}'),l={name:"cli/logs.md"};function n(p,s,h,d,o,r){return i(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="cloudpipe-logs" tabindex="-1">cloudpipe logs <a class="header-anchor" href="#cloudpipe-logs" aria-label="Permalink to &quot;cloudpipe logs&quot;">​</a></h1><p>查看專案的執行日誌。</p><h2 id="語法" tabindex="-1">語法 <a class="header-anchor" href="#語法" aria-label="Permalink to &quot;語法&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [options]</span></span></code></pre></div><h2 id="參數" tabindex="-1">參數 <a class="header-anchor" href="#參數" aria-label="Permalink to &quot;參數&quot;">​</a></h2><table tabindex="0"><thead><tr><th>參數</th><th>說明</th></tr></thead><tbody><tr><td><code>name</code></td><td>專案名稱（必填）</td></tr></tbody></table><h2 id="選項" tabindex="-1">選項 <a class="header-anchor" href="#選項" aria-label="Permalink to &quot;選項&quot;">​</a></h2><table tabindex="0"><thead><tr><th>選項</th><th>說明</th></tr></thead><tbody><tr><td><code>--lines, -n &lt;number&gt;</code></td><td>顯示最後 N 行（預設 100）</td></tr><tr><td><code>--follow, -f</code></td><td>持續追蹤新日誌（類似 <code>tail -f</code>）</td></tr><tr><td><code>--error</code></td><td>只顯示錯誤日誌</td></tr><tr><td><code>--out</code></td><td>只顯示標準輸出</td></tr></tbody></table><h2 id="範例" tabindex="-1">範例 <a class="header-anchor" href="#範例" aria-label="Permalink to &quot;範例&quot;">​</a></h2><h3 id="查看最近日誌" tabindex="-1">查看最近日誌 <a class="header-anchor" href="#查看最近日誌" aria-label="Permalink to &quot;查看最近日誌&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-api</span></span></code></pre></div><p>輸出：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>2024-01-15 10:30:15 [INFO] Server started on port 4003</span></span>
<span class="line"><span>2024-01-15 10:30:16 [INFO] Connected to database</span></span>
<span class="line"><span>2024-01-15 10:31:02 [INFO] GET /api/users 200 15ms</span></span>
<span class="line"><span>2024-01-15 10:31:05 [INFO] POST /api/login 200 45ms</span></span></code></pre></div><h3 id="追蹤即時日誌" tabindex="-1">追蹤即時日誌 <a class="header-anchor" href="#追蹤即時日誌" aria-label="Permalink to &quot;追蹤即時日誌&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-api</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --follow</span></span></code></pre></div><p>按 <code>Ctrl+C</code> 停止追蹤。</p><h3 id="顯示更多行數" tabindex="-1">顯示更多行數 <a class="header-anchor" href="#顯示更多行數" aria-label="Permalink to &quot;顯示更多行數&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-api</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --lines</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span></span></code></pre></div><h3 id="只看錯誤" tabindex="-1">只看錯誤 <a class="header-anchor" href="#只看錯誤" aria-label="Permalink to &quot;只看錯誤&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-api</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --error</span></span></code></pre></div><p>輸出：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>2024-01-15 10:32:15 [ERROR] Database connection failed</span></span>
<span class="line"><span>2024-01-15 10:32:16 [ERROR] Retrying in 5 seconds...</span></span></code></pre></div><h2 id="日誌位置" tabindex="-1">日誌位置 <a class="header-anchor" href="#日誌位置" aria-label="Permalink to &quot;日誌位置&quot;">​</a></h2><p>PM2 日誌檔案存放在：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>~/.pm2/logs/</span></span>
<span class="line"><span>├── my-api-out.log    # stdout</span></span>
<span class="line"><span>├── my-api-error.log  # stderr</span></span></code></pre></div><p>你也可以直接用 PM2 指令查看：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-api</span></span></code></pre></div><h2 id="部署日誌" tabindex="-1">部署日誌 <a class="header-anchor" href="#部署日誌" aria-label="Permalink to &quot;部署日誌&quot;">​</a></h2><p>查看部署過程的日誌（build、install 等）：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-api</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --deploy</span></span></code></pre></div><p>或透過 API：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://epi.isnowfriend.com/api/_admin/deploy/projects/my-api</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.deployments[0]&#39;</span></span></code></pre></div><h2 id="日誌輪替" tabindex="-1">日誌輪替 <a class="header-anchor" href="#日誌輪替" aria-label="Permalink to &quot;日誌輪替&quot;">​</a></h2><p>建議設定 PM2 日誌輪替，避免日誌檔案過大：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2-logrotate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2-logrotate:max_size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10M</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2-logrotate:retain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7</span></span></code></pre></div><h2 id="相關指令" tabindex="-1">相關指令 <a class="header-anchor" href="#相關指令" aria-label="Permalink to &quot;相關指令&quot;">​</a></h2><ul><li><a href="/docs/cli/list.html">cloudpipe list</a> - 查看所有部署</li><li><a href="/docs/cli/deploy.html">cloudpipe deploy</a> - 部署專案</li></ul>`,37)])])}const g=a(l,[["render",n]]);export{c as __pageData,g as default};
