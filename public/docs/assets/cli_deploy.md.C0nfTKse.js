import{_ as s,o as i,c as e,ag as t}from"./chunks/framework.wGDfT7ie.js";const u=JSON.parse('{"title":"cloudpipe deploy","description":"","frontmatter":{},"headers":[],"relativePath":"cli/deploy.md","filePath":"cli/deploy.md"}'),l={name:"cli/deploy.md"};function n(p,a,d,h,o,r){return i(),e("div",null,[...a[0]||(a[0]=[t(`<h1 id="cloudpipe-deploy" tabindex="-1">cloudpipe deploy <a class="header-anchor" href="#cloudpipe-deploy" aria-label="Permalink to &quot;cloudpipe deploy&quot;">​</a></h1><p>部署專案到 CloudPipe。</p><h2 id="語法" tabindex="-1">語法 <a class="header-anchor" href="#語法" aria-label="Permalink to &quot;語法&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [path] [options]</span></span></code></pre></div><h2 id="參數" tabindex="-1">參數 <a class="header-anchor" href="#參數" aria-label="Permalink to &quot;參數&quot;">​</a></h2><table tabindex="0"><thead><tr><th>參數</th><th>說明</th><th>預設值</th></tr></thead><tbody><tr><td><code>path</code></td><td>專案路徑或 GitHub URL</td><td>當前目錄</td></tr></tbody></table><h2 id="選項" tabindex="-1">選項 <a class="header-anchor" href="#選項" aria-label="Permalink to &quot;選項&quot;">​</a></h2><table tabindex="0"><thead><tr><th>選項</th><th>說明</th></tr></thead><tbody><tr><td><code>--name, -n &lt;name&gt;</code></td><td>指定專案名稱（子域名）</td></tr><tr><td><code>--port, -p &lt;port&gt;</code></td><td>指定 port</td></tr><tr><td><code>--watch, -w</code></td><td>啟用 watch mode（開發用）</td></tr><tr><td><code>--branch, -b &lt;branch&gt;</code></td><td>指定分支（GitHub 部署）</td></tr><tr><td><code>--build &lt;command&gt;</code></td><td>自訂 build 指令</td></tr><tr><td><code>--entry &lt;file&gt;</code></td><td>指定入口檔案</td></tr></tbody></table><h2 id="範例" tabindex="-1">範例 <a class="header-anchor" href="#範例" aria-label="Permalink to &quot;範例&quot;">​</a></h2><h3 id="部署當前目錄" tabindex="-1">部署當前目錄 <a class="header-anchor" href="#部署當前目錄" aria-label="Permalink to &quot;部署當前目錄&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-project</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span></code></pre></div><h3 id="部署-github-專案" tabindex="-1">部署 GitHub 專案 <a class="header-anchor" href="#部署-github-專案" aria-label="Permalink to &quot;部署 GitHub 專案&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/user/repo</span></span></code></pre></div><h3 id="指定名稱和-port" tabindex="-1">指定名稱和 port <a class="header-anchor" href="#指定名稱和-port" aria-label="Permalink to &quot;指定名稱和 port&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-api</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4005</span></span></code></pre></div><h3 id="開發模式-watch" tabindex="-1">開發模式（watch） <a class="header-anchor" href="#開發模式-watch" aria-label="Permalink to &quot;開發模式（watch）&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch</span></span></code></pre></div><p>檔案變更時會自動重新部署。</p><h3 id="部署特定分支" tabindex="-1">部署特定分支 <a class="header-anchor" href="#部署特定分支" aria-label="Permalink to &quot;部署特定分支&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloudpipe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/user/repo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --branch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> develop</span></span></code></pre></div><h2 id="自動偵測" tabindex="-1">自動偵測 <a class="header-anchor" href="#自動偵測" aria-label="Permalink to &quot;自動偵測&quot;">​</a></h2><p>CloudPipe 會自動偵測：</p><ul><li><strong>框架</strong>：Next.js、Vite、Create React App、Express 等</li><li><strong>Package Manager</strong>：npm、yarn、pnpm</li><li><strong>Build Command</strong>：從 <code>package.json</code> 讀取</li><li><strong>Entry File</strong>：<code>main</code> 欄位或常見檔案名</li></ul><h3 id="偵測結果範例" tabindex="-1">偵測結果範例 <a class="header-anchor" href="#偵測結果範例" aria-label="Permalink to &quot;偵測結果範例&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Detected:</span></span>
<span class="line"><span>  Framework:  Next.js</span></span>
<span class="line"><span>  Package:    pnpm</span></span>
<span class="line"><span>  Build:      pnpm run build</span></span>
<span class="line"><span>  Start:      next start</span></span></code></pre></div><h2 id="部署流程" tabindex="-1">部署流程 <a class="header-anchor" href="#部署流程" aria-label="Permalink to &quot;部署流程&quot;">​</a></h2><ol><li>分析專案結構</li><li>建立或更新專案設定</li><li>拉取程式碼（如果是 GitHub）</li><li>安裝依賴 (<code>npm install</code>)</li><li>執行 build（如果有）</li><li>啟動 PM2 process</li><li>設定 Cloudflare Tunnel 路由</li><li>回報部署結果</li></ol><h2 id="輸出" tabindex="-1">輸出 <a class="header-anchor" href="#輸出" aria-label="Permalink to &quot;輸出&quot;">​</a></h2><p>成功部署會顯示：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>✓ Deployed successfully!</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  URL:     https://my-api.isnowfriend.com</span></span>
<span class="line"><span>  Status:  Running</span></span>
<span class="line"><span>  Port:    4003</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  View logs: cloudpipe logs my-api</span></span></code></pre></div><h2 id="錯誤處理" tabindex="-1">錯誤處理 <a class="header-anchor" href="#錯誤處理" aria-label="Permalink to &quot;錯誤處理&quot;">​</a></h2><h3 id="build-失敗" tabindex="-1">Build 失敗 <a class="header-anchor" href="#build-失敗" aria-label="Permalink to &quot;Build 失敗&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>✗ Build failed</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Error: Command failed: npm run build</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Fix the build error and try again.</span></span></code></pre></div><h3 id="port-衝突" tabindex="-1">Port 衝突 <a class="header-anchor" href="#port-衝突" aria-label="Permalink to &quot;Port 衝突&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>✗ Port 4003 is already in use</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Try: cloudpipe deploy --port 4004</span></span></code></pre></div><h2 id="相關指令" tabindex="-1">相關指令 <a class="header-anchor" href="#相關指令" aria-label="Permalink to &quot;相關指令&quot;">​</a></h2><ul><li><a href="/docs/cli/list.html">cloudpipe list</a> - 查看所有部署</li><li><a href="/docs/cli/logs.html">cloudpipe logs</a> - 查看日誌</li><li><a href="/docs/cli/delete.html">cloudpipe delete</a> - 刪除部署</li></ul>`,37)])])}const b=s(l,[["render",n]]);export{u as __pageData,b as default};
